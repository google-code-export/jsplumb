<!doctype html>
<html>
	<head>
		<title>create an element and make it instantly draggable test</title>
		<style>
			.testDiv {
				width:5em;
				height:5em;
				background-color:red;
				border:1px solid #465;
			}
		</style>
	</head>
	<body>
		


		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
		<script type="text/javascript">
			$(function() {
				$(document).bind("mousedown", function(e) {
					var d = document.createElement("div");
					d.className = "testDiv";
					document.body.appendChild(d);
					var w = $(d).outerWidth(), h = $(d).outerHeight();
					$(d).offset({left:e.pageX - (w/2), top:e.pageY - (h/2)});
					$(d).draggable({
						stop:function() { alert("stopped!"); }
					});
					e.stopPropagation();
					$(d).trigger(e);
				});

			});
		</script> 
	</body>
</html>